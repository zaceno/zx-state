{"version":3,"file":"zx-state.umd.js","sources":["../src/index.js"],"sourcesContent":["export default (main, onupdate) => {\n    var pending = false\n    const mapFunctionCollection = mapping => coll => {\n        if (typeof coll == 'function') return mapping(coll)\n        return Object.keys(coll).reduce((mapped, name) => {\n            mapped[name] = mapping(coll[name])\n            return mapped\n        }, {})\n    }\n    const store = _ => {\n        var state = {}\n        return {\n            set: diff => {\n                state = Object.assign({}, state, diff)\n                if (pending) return\n                pending = !pending\n                setTimeout(_ => {\n                    pending = !pending\n                    onupdate()\n                })\n            },\n            with: mapFunctionCollection(f => (...args) => f(state, ...args)),\n            sync: mapFunctionCollection(f => f(store())),\n        }\n    }\n    return main(store())\n}"],"names":["main","onupdate","pending","mapFunctionCollection","mapping","coll","Object","keys","reduce","mapped","name","store","_","state","set","diff","assign","setTimeout","with","f","args","sync"],"mappings":"0CAAe,CAACA,EAAMC,KAClB,IAAIC,GAAU,EACd,MAAMC,EAAwBC,GAAWC,GAClB,mBAARA,EAA2BD,EAAQC,GACvCC,OAAOC,KAAKF,GAAMG,OAAO,CAACC,EAAQC,KACrCD,EAAOC,GAAQN,EAAQC,EAAKK,IACrBD,OAGTE,EAAQC,IACV,IAAIC,KACJ,OACIC,IAAKC,IACDF,EAAQP,OAAOU,UAAWH,EAAOE,GAC7Bb,IACJA,GAAWA,EACXe,WAAWL,IACPV,GAAWA,EACXD,QAGRiB,KAAMf,EAAsBgB,GAAK,IAAIC,IAASD,EAAEN,KAAUO,IAC1DC,KAAMlB,EAAsBgB,GAAKA,EAAER,QAG3C,OAAOX,EAAKW"}