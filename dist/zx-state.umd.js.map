{"version":3,"file":"zx-state.umd.js","sources":["../src/index.js"],"sourcesContent":["const mapFunctionCollection = mapping => coll => {\n    if (typeof coll == 'function') return mapping(coll)\n    return Object.keys(coll).reduce((mapped, name) => {\n        mapped[name] = mapping(coll[name])\n        return mapped\n    }, {})\n}\nconst store = onupdate => {\n    var state = {}\n    const set = diff => {\n        state = Object.assign({}, state, diff)\n        onupdate()\n    }\n    return {\n        init: set,\n        getter: mapFunctionCollection(f => (...args) => f(state, ...args)),\n        setter: mapFunctionCollection(f => (...args) => set(f(state, ...args))),\n        component: mapFunctionCollection(f => f(store(onupdate))),\n    }    \n}\n\nexport default (main, onupdate) => {\n    var pending = false\n    return main(store(_ => {\n        if (pending) return\n        pending = !pending\n        setTimeout(_ => {\n            pending = !pending\n            onupdate()\n        })\n    }))\n}"],"names":["mapFunctionCollection","mapping","coll","Object","keys","reduce","mapped","name","store","onupdate","state","set","diff","assign","init","getter","f","args","setter","component","main","pending","_","setTimeout"],"mappings":"oCAAA,MAAMA,EAAwBC,GAAWC,GAClB,mBAARA,EAA2BD,EAAQC,GACvCC,OAAOC,KAAKF,GAAMG,OAAO,CAACC,EAAQC,KACrCD,EAAOC,GAAQN,EAAQC,EAAKK,IACrBD,OAGTE,EAAQC,IACV,IAAIC,KACJ,MAAMC,EAAMC,IACRF,EAAQP,OAAOU,UAAWH,EAAOE,GACjCH,KAEJ,OACIK,KAAMH,EACNI,OAAQf,EAAsBgB,GAAK,IAAIC,IAASD,EAAEN,KAAUO,IAC5DC,OAAQlB,EAAsBgB,GAAK,IAAIC,IAASN,EAAIK,EAAEN,KAAUO,KAChEE,UAAWnB,EAAsBgB,GAAKA,EAAER,EAAMC,aAIvC,CAACW,EAAMX,KAClB,IAAIY,GAAU,EACd,OAAOD,EAAKZ,EAAMc,IACVD,IACJA,GAAWA,EACXE,WAAWD,IACPD,GAAWA,EACXZ"}