{"version":3,"file":"zx-state.umd.js","sources":["../src/index.js"],"sourcesContent":["export default (main, onupdate) => {\n    var pending = false\n    const mapFunctionCollection = mapping => coll => {\n        if (typeof coll == 'function') return mapping(coll)\n        return Object.keys(coll).reduce((mapped, name) => {\n            mapped[name] = mapping(coll[name])\n            return mapped\n        }, {})\n    }\n    const store = _ => {\n        var state = {}\n        return {\n            set: diff => {\n                state = Object.assign({}, state, diff)\n                if (pending) return\n                pending = !pending\n                setTimeout(_ => {\n                    pending = !pending\n                    onupdate()\n                })\n            },\n            with: mapFunctionCollection(f => (...args) => f(state, ...args)),\n            sync: (f, ...args) => f(store(), ...args),\n        }\n    }\n    return main(store())\n}"],"names":["main","onupdate","pending","store","_","state","set","diff","Object","assign","setTimeout","with","mapping","coll","keys","reduce","mapped","name","mapFunctionCollection","f","args","sync"],"mappings":"0CAAe,CAACA,EAAMC,KAClB,IAAIC,GAAU,EACd,MAOMC,EAAQC,IACV,IAAIC,KACJ,OACIC,IAAKC,IACDF,EAAQG,OAAOC,UAAWJ,EAAOE,GAC7BL,IACJA,GAAWA,EACXQ,WAAWN,IACPF,GAAWA,EACXD,QAGRU,KAnBsBC,CAAAA,GAAWC,GAClB,mBAARA,EAA2BD,EAAQC,GACvCL,OAAOM,KAAKD,GAAME,OAAO,CAACC,EAAQC,KACrCD,EAAOC,GAAQL,EAAQC,EAAKI,IACrBD,OAeDE,CAAsBC,GAAK,IAAIC,IAASD,EAAEd,KAAUe,IAC1DC,KAAM,CAACF,KAAMC,IAASD,EAAEhB,OAAYiB,KAG5C,OAAOpB,EAAKG"}